(this["webpackJsonpgpt-bat"]=this["webpackJsonpgpt-bat"]||[]).push([[0],{1036:function(t,e,n){"use strict";n.r(e);var s,r,i,o,a,l,c,p,u,h,b,d,j,_,f,m,O,g,v,x,y,k,w,S,N,C,P,T,A,E,I,z,K,R,D=n(0),L=n.n(D),F=n(45),B=n.n(F),W=(n(492),n(31)),G=n(32),H=n(37),M=n(36),U=n(71),J=n(50),V=n(27),Y=n(2),$=Object(V.b)("store")(s=Object(V.c)(s=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(Y.jsx)("div",{className:"title",children:Object(Y.jsxs)("h1",{children:["Hello\uff0c",this.props.store.appname]})})}}]),n}(D.Component))||s)||s,q=$,Q=n(1040),X=(r=Object(V.b)("store"),Object(J.f)(i=r(i=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("h1",{children:Object(Y.jsx)(q,{})}),Object(Y.jsx)("div",{children:Object(Y.jsx)(Q.b,{onClick:function(){return t.props.store.appname+="\ud83c\udf88"},children:"change"})}),Object(Y.jsx)("div",{children:Object(Y.jsx)("span",{onClick:function(){return t.props.history.push("/login")},children:"Login"})})]})}}]),n}(D.Component))||i)||i),Z=X,tt=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(Y.jsx)("h1",{children:"Login form"})}}]),n}(D.Component),et=tt,nt=n(430),st=n.n(nt),rt=(o=Object(V.b)("store"),Object(J.f)(a=o(a=Object(V.c)(a=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(Y.jsx)("div",{className:(this.props.className||"")+" header",children:"Header"})}}]),n}(D.Component))||a)||a),l=Object(V.b)("store"),Object(J.f)(c=l(c=Object(V.c)(c=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(Y.jsx)("div",{className:(this.props.className||"")+" footer",children:"Footer"})}}]),n}(D.Component))||c)||c),p=Object(V.b)("store"),Object(J.f)(u=p(u=Object(V.c)(u=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(Y.jsx)(st.a,{title:this.props.title||this.props.store.appname,children:Object(Y.jsx)("div",{className:"cbox",children:Object(Y.jsx)("div",{className:"solo-center body wrapped",children:this.props.main})})})}}]),n}(D.Component))||u)||u)||u),it=rt,ot=(h=Object(V.b)("store"),Object(J.f)(b=h(b=Object(V.c)(b=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=Object(Y.jsx)("div",{children:"Sample"});return Object(Y.jsx)(it,{title:this.props.store.appname,main:t})}}]),n}(D.Component))||b)||b),n(18)),at=n(8),lt=n.n(at),ct=n(28),pt=n(435),ut=(d=Object(V.b)("store"),Object(J.f)(j=d(j=Object(V.c)(j=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t,e=this,n=this.props.store[this.props.field]||"";return Object(Y.jsxs)(Q.f,{label:this.props.label,children:["textarea"==this.props.type?Object(Y.jsx)(Q.h,{growVertically:null===(t=this.props.growVertically)||void 0===t||t,large:!0,placeholder:this.props.placeholder,onChange:function(t){return e.props.store[e.props.field]=t.target.value},value:n,className:this.props.textClass||"",fill:!0}):Object(Y.jsx)(Q.g,{className:this.props.className||"",type:this.props.type,large:"true",placeholder:this.props.placeholder,onChange:function(t){return e.props.store[e.props.field]=t.target.value},value:n}),parseInt(this.props.max_count)>0&&Object(Y.jsxs)("div",{className:"text-count",children:[n.length,"/",this.props.max_count]})]})}}]),n}(D.Component))||j)||j)||j),ht=ut,bt=n(109),dt=(_=Object(V.b)("store"),Object(J.f)(f=_(f=Object(V.c)(f=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"std-hr form-div"}),Object(Y.jsx)(Q.f,{children:Object(Y.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(Y.jsx)("div",{className:"left",children:Object(Y.jsx)(Q.b,{large:"true",intent:bt.a.PRIMARY,onClick:function(){return t.props.onSubmit()},children:"\u63d0\u4ea4"})}),Object(Y.jsx)("div",{className:"right",children:this.props.cancel||Object(Y.jsx)(Q.b,{large:"true",onClick:function(){return t.props.history.goBack()},className:"right-20",children:"\u53d6\u6d88"})})]})})]})}}]),n}(D.Component))||f)||f)||f),jt=dt,_t=n(434),ft=(m=Object(V.b)("store"),Object(J.f)(O=m(O=Object(V.c)(O=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=this.props.options.filter((function(e){return t.props.store[t.props.field]==e.value}));Date.now();return Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{className:"lossline",children:this.props.label}),Object(Y.jsx)(_t.a,{className:this.props.className,menuPlacement:this.props.menuPlacement||"auto",placeholder:this.props.placeholder||"\u8bf7\u9009\u62e9",value:e,isMulti:!1,onChange:function(e){console.log("e",e),t.props.store[t.props.field]=e?e.value:"",t.props.onChange&&t.props.onChange(e)},options:this.props.options||[]})]})}}]),n}(D.Component))||O)||O)||O),mt=ft,Ot=n(61),gt=n(62),vt=(n(548),n(13)),xt=n(436),yt=n(432),kt=n.n(yt),wt="GPTBAT_",St=(g=function(){function t(){Object(W.a)(this,t),Object(Ot.a)(this,"appname",v,this),Object(Ot.a)(this,"split_type",x,this),Object(Ot.a)(this,"split_length",y,this),Object(Ot.a)(this,"split_char",k,this),Object(Ot.a)(this,"system_prompt",w,this),Object(Ot.a)(this,"user_prompt",S,this),Object(Ot.a)(this,"max_tokens",N,this),Object(Ot.a)(this,"temperature",C,this),Object(Ot.a)(this,"upload_tokens_count",P,this),Object(Ot.a)(this,"model",T,this),Object(Ot.a)(this,"lists",A,this),Object(Ot.a)(this,"count_token",E,this),Object(Ot.a)(this,"_content",I,this),this.i18n={zh:{subtitle:"GPT\u957f\u6587\u672c\u5904\u7406\u7a0b\u5e8f",split_type:"\u5206\u9694\u65b9\u5f0f",split_by_line:"\u6309\u6362\u884c\u5206\u9694",split_by_length:"\u6309\u957f\u5ea6\u5206\u9694",split_by_length_n_line:"\u6309\u6362\u884c\u5206\u9694\uff0c\u5e76\u805a\u5408",split_by_char:"\u6309\u7279\u6b8a\u5b57\u7b26\u5206\u9694",split_length:"\u5206\u9694\u957f\u5ea6",split_char:"\u5206\u9694\u7b26\uff0c\u652f\u6301\u6b63\u5219",system_prompt:"System \u63d0\u793a\u8bcd",user_prompt:"User \u63d0\u793a\u8bcd",model:"\u6a21\u578b",upload_file:"\u9009\u62e9\u6587\u4ef6",paste_text:"\u7c98\u8d34\u6587\u672c",begin_process:"\u5f00\u59cb\u5904\u7406",segment:"\u6bb5",about:"\u7ea6",key_settings_title:"\u8bbe\u7f6eOpenAI/ Forward Key",key_settings_key:"\u8bf7\u8f93\u5165OpenAI/Forward KEY: sk-xxx/fkxxx",key_settings_url:"\u8bf7\u8f93\u5165API\u5730\u5740\uff0c\u5982\u65e0\u9700\u4ee3\u7406\u53ef\u7559\u7a7a",key_settings_apply:"\u7533\u8bf7Forward Key \xb7 \u53ef\u5fae\u4fe1\u5145\u503c",content_settings_title:"\u7c98\u8d34\u5185\u5bb9",content_settings_content:"\u8bf7\u5c06\u5185\u5bb9\u7c98\u8d34\u5230\u8fd9\u91cc"},en:{subtitle:"Batch Processing for GPT",split_type:"Split Type",split_by_line:"Split by Line",split_by_length:"Split by Length",split_by_length_n_line:"\u6309\u6362\u884c\u5206\u9694\uff0c\u5e76\u805a\u5408",split_by_char:"Split by Special Character",split_length:"Split Length",split_char:"Split Character, supports regex",system_prompt:"System Prompt",user_prompt:"User Prompt",model:"Model",upload_file:"Select File",paste_text:"Paste Text",begin_process:"Process",segment:"Segments",about:"About",key_settings_title:"Set OpenAI/Forward Key",key_settings_key:"Please enter OpenAI/Forward KEY: sk-xxx/fkxxx",key_settings_url:"Please enter API address, leave blank if no proxy is needed",key_settings_apply:"Apply for Forward Key \xb7 WeChat recharge available",content_settings_title:"Paste Content",content_settings_content:"Please paste the content here"}},Object(Ot.a)(this,"openai_key",z,this),Object(Ot.a)(this,"openai_api_url",K,this),this.to_save_vars=["openai_key","openai_api_url","split_type","split_length","split_char","system_prompt","user_prompt","max_tokens","model","temperature"],Object(Ot.a)(this,"menu",R,this),this.load_vars()}return Object(G.a)(t,[{key:"load_vars",value:function(){var t=this;this.to_save_vars.forEach((function(e){var n=window.localStorage.getItem(wt+e);n&&(t[e]=JSON.parse(n))}))}},{key:"save_vars",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=null===e?this.to_save_vars:[e];n.forEach((function(e){window.localStorage.setItem(wt+e,JSON.stringify(t[e]))}))}},{key:"get_token_count",value:function(){var t=Object(ct.a)(lt.a.mark((function t(e){var n,s;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TOKEN_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TOKEN_KEY,text:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:if(s=t.sent,console.log("json",s),!s||!s.count){t.next=11;break}return t.abrupt("return",s.count);case 11:return t.abrupt("return",0);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"do_process",value:function(){var t=Object(ct.a)(lt.a.mark((function t(e){var n,s,r,i,o,a,l,c,p,u,h,b,d,j,_=arguments;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_.length>1&&void 0!==_[1]?_[1]:null,s=_.length>2&&void 0!==_[2]?_[2]:null,r=_.length>3&&void 0!==_[3]?_[3]:null,i=_.length>4&&void 0!==_[4]?_[4]:null,n||s||Tt("\u63d0\u793a\u8bcd\u4e0d\u80fd\u540c\u65f6\u4e3a\u7a7a"),o=e+"|"+n+"|"+s+"|"+r+"|"+i,a=kt()(o).toString(),!(l=window.localStorage.getItem("cache-"+a))){t.next=12;break}return t.abrupt("return",l);case 12:return(c=new xt.a(this.openai_key.trim())).setApiBaseUrl(this.openai_api_url.trim()),p=[],s&&p.push({content:s,role:"system"}),n&&p.push({content:n.replace("{$content}",e),role:"user"}),t.next=19,c.completion({messages:p,model:r||this.model,max_tokens:parseInt(i)||parseInt(this.max_tokens)});case 19:if(!(u=t.sent)){t.next=25;break}return window.localStorage.setItem("cache-"+a,null===(h=u.choices[0])||void 0===h||null===(b=h.message)||void 0===b?void 0:b.content.trim()),t.abrupt("return",null===(d=u.choices[0])||void 0===d||null===(j=d.message)||void 0===j?void 0:j.content.trim());case 25:return t.abrupt("return","");case 26:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),v=Object(gt.a)(g.prototype,"appname",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"GPT::BAT"}}),x=Object(gt.a)(g.prototype,"split_type",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"lengthAndLine"}}),y=Object(gt.a)(g.prototype,"split_length",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4e3}}),k=Object(gt.a)(g.prototype,"split_char",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"\\n---\\n"}}),w=Object(gt.a)(g.prototype,"system_prompt",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Please help me to translate the following text to Chinese. Please return only translated content not include the origin text."}}),S=Object(gt.a)(g.prototype,"user_prompt",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{$content}"}}),N=Object(gt.a)(g.prototype,"max_tokens",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),C=Object(gt.a)(g.prototype,"temperature",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),P=Object(gt.a)(g.prototype,"upload_tokens_count",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=Object(gt.a)(g.prototype,"model",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"gpt-4o-mini"}}),A=Object(gt.a)(g.prototype,"lists",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=Object(gt.a)(g.prototype,"count_token",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"no"}}),I=Object(gt.a)(g.prototype,"_content",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=Object(gt.a)(g.prototype,"openai_key",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),K=Object(gt.a)(g.prototype,"openai_api_url",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://api.openai.com"}}),R=Object(gt.a)(g.prototype,"menu",[vt.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{id:8001,text:"\u9996\u9875",link:"/home",member_only:!1}]}}),g),Nt=new St,Ct=n(51),Pt=Q.i.create({className:"lm-toaster",position:Ct.a.TOP});n(551),n(552);function Tt(t){Pt.show({message:t})}var At,Et,It,zt,Kt=n(433),Rt=(At=Object(V.b)("store"),Object(J.f)(Et=At(Et=Object(V.c)(Et=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this,e=1,n=Date.now();return Object(Y.jsxs)("div",{className:"lossline",children:[Object(Y.jsx)("div",{className:"label lossline",children:this.props.label}),this.props.options&&this.props.options.map((function(s){return Object(Y.jsx)(Q.d,{checked:"yes"==t.props.store[s.field],label:s.label,onChange:function(e){t.props.store[s.field]=e.target.checked?"yes":"no"},inline:!0},n+e++)}))]})}}]),n}(D.Component))||Et)||Et),It=Object(V.b)("store"),Object(J.f)(zt=It(zt=Object(V.c)(zt=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(t){var s;return Object(W.a)(this,n),(s=e.call(this,t)).drop_ref=L.a.createRef(),s.state={open_dialog:!1,out:"",map_text:"",lang:"zh",open_editor:!1},s}return Object(G.a)(n,[{key:"onDropped",value:function(t){var e=this;console.log(t);var n=new FileReader;n.addEventListener("loadend",function(){var t=Object(ct.a)(lt.a.mark((function t(n){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.content=n.target.result,t.next=3,e.spliting(e.content);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.readAsText(t[0])}},{key:"spliting",value:function(){var t=Object(ct.a)(lt.a.mark((function t(e){var n,s,r,i,o,a,l,c,p,u,h,b,d,j,_;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&!(e.trim().length<1)){t.next=2;break}return t.abrupt("return",!1);case 2:if("newline"!=this.props.store.split_type&&"lengthAndLine"!=this.props.store.split_type||(this.props.store.lists=e.split("\n").filter((function(t){return t.length>1}))),"lengthAndLine"==this.props.store.split_type){for(n=parseInt(this.props.store.split_length),s=[""],r=0;r<this.props.store.lists.length;r++)s[s.length-1].length+this.props.store.lists[r].length<n?s[s.length-1]+="\n"+this.props.store.lists[r]:s.push(this.props.store.lists[r]);this.props.store.lists=s}if("char"==this.props.store.split_type&&(this.props.store.lists=null===e||void 0===e?void 0:e.split(RegExp(this.props.store.split_char)).filter((function(t){return t.length>0}))),"length"==this.props.store.split_type){for(i=parseInt(this.props.store.split_length),o=[],a=0;a<e.length;a+=i)o.push(e.substr(a,i));o&&o.length>0&&(this.props.store.lists=o)}for(l=parseInt(this.props.store.max_tokens),c=[],p=0;p<(null===(u=this.props.store.lists)||void 0===u?void 0:u.length);p++)if((h=this.props.store.lists[p]).length>l)for(b=Math.ceil(h.length/l),d=0;d<b;d++)c.push(h.substr(d*l,l));else c.push(h);if(c&&c.length>0&&(this.props.store.lists=c),console.log(" files"),"yes"!=this.props.store.count_token){t.next=23;break}return t.next=14,this.props.store.get_token_count(this.props.store.user_prompt+""+this.props.store.system_prompt);case 14:return j=t.sent,t.next=17,this.props.store.get_token_count(e);case 17:if(t.t0=t.sent,t.t0){t.next=20;break}t.t0=1.5*e.length;case 20:_=t.t0,console.log("prompts_token_count",j,"content_token_count",_),this.props.store.upload_tokens_count=_+(6+j)*this.props.store.lists.length;case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"paste",value:function(){var t=Object(ct.a)(lt.a.mark((function t(){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({open_editor:!0});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"process",value:function(){var t=Object(ct.a)(lt.a.mark((function t(){var e,n,s,r,i,o;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.content){t.next=2;break}return t.abrupt("return",!1);case 2:if(0!=this.props.store.openai_key.trim().length){t.next=6;break}return Tt("\u8bf7\u5148\u8bbe\u7f6eOpenAI/API2D Key"),this.setState({open_dialog:!0}),t.abrupt("return");case 6:this.props.store.save_vars(),this.setState({out:"\u5f00\u59cb\u5904\u7406"}),e=this.props.store,n=[],t.prev=10,s=0;case 12:if(!(s<e.lists.length)){t.next=22;break}return r=e.lists[s],t.next=16,e.do_process(r,e.user_prompt,e.system_prompt,e.model,e.max_tokens||1e3);case 16:(i=t.sent)&&n.push(i),this.setState({out:"\u5df2\u5b8c\u6210"+(s+1)+"/"+e.lists.length,map_text:" - "+i.substr(0,50)+"..."});case 19:s++,t.next=12;break;case 22:t.next=29;break;case 24:return t.prev=24,t.t0=t.catch(10),console.error(t.t0),Tt("\u5904\u7406\u5931\u8d25\uff0c\u8bf7\u5df2\u5904\u7406\u5185\u5bb9\u5df2\u7f13\u5b58\uff0c\u53ef\u7a0d\u540e\u91cd\u65b0\u518d\u8bd5"),t.abrupt("return");case 29:o="length"==e.split_type||"lengthAndLine"==e.split_type?"":"\r\n",Object(Kt.saveAs)(new Blob([n.join(o)],{type:"text/plain;charset=utf-8"}),"GPT_BAT_result.txt"),window.setTimeout((function(){if(window.confirm("\u5904\u7406\u5b8c\u6210\uff0c\u662f\u5426\u6e05\u9664\u7f13\u5b58")){for(var t=0;t<localStorage.length;t++){var e=localStorage.key(t);e.startsWith("cache")&&localStorage.removeItem(e)}Tt("\u6e05\u9664\u5b8c\u6210")}}),3e3);case 32:case"end":return t.stop()}}),t,this,[[10,24]])})));return function(){return t.apply(this,arguments)}}()},{key:"toggle_token",value:function(){var t=Object(ct.a)(lt.a.mark((function t(){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("no"!=this.props.store.count_token){t.next=10;break}if(window.confirm("Token\u9884\u4f30\u9700\u8981\u5c06\u60a8\u7684\u5185\u5bb9\u53d1\u9001\u5230\u670d\u52a1\u5668\u8fdb\u884c\u8ba1\u7b97\uff0c\u4e14\u9884\u4f30\u6570\u91cf\u4e0d\u5b8c\u5168\u51c6\u786e\uff0c\u662f\u5426\u7ee7\u7eed\uff1f")){t.next=5;break}return t.abrupt("return",!1);case 5:return this.props.store.count_token="yes",t.next=8,this.spliting(this.content);case 8:t.next=11;break;case 10:this.props.store.count_token="no";case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"save_key",value:function(){var t=Object(ct.a)(lt.a.mark((function t(){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.props.store.openai_key=this.props.store.openai_key.trim(),this.props.store.openai_api_url=this.props.store.openai_api_url.trim(),!this.props.store.openai_key||!this.props.store.openai_key.trim().startsWith("fk")||"https://api.openai.com"!=this.props.store.openai_api_url.trim()&&this.props.store.openai_api_url||(Tt("\u68c0\u6d4b\u5230\u60a8\u4f7f\u7528\u7684\u662fapi2d key\uff0c\u5df2\u81ea\u52a8\u5207\u6362\u5230API2D\u5730\u5740"),this.props.store.openai_api_url="https://openai.api2d.net"),this.props.store.save_vars(),this.setState({open_dialog:!1}),Tt("\u4fdd\u5b58\u6210\u529f");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"save_content",value:function(){var t=Object(ct.a)(lt.a.mark((function t(){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.content=this.props.store._content,t.next=3,this.spliting(this.content);case 3:this.setState({open_editor:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,n,s,r,i,o,a,l,c,p,u,h,b,d,j,_,f,m,O,g,v,x,y=this,k=this.props.store,w=Object(Y.jsxs)("div",{className:"flex flex-row justify-between border rounded  p-10 mt-10 editor",children:[Object(Y.jsxs)("div",{className:"left w-1/2",children:[Object(Y.jsx)("div",{className:"text-xl text-blue-500",children:"GPT::BAT"}),Object(Y.jsx)("div",{className:"text-lg mb-5 text-gray-400",children:null===(t=k.i18n[this.state.lang])||void 0===t?void 0:t.subtitle}),Object(Y.jsx)(mt,{onChange:function(){return y.spliting(y.content)},field:"split_type",className:"mt-2",label:null===(e=k.i18n[this.state.lang])||void 0===e?void 0:e.split_type,options:[{value:"lengthAndLine",label:null===(n=k.i18n[this.state.lang])||void 0===n?void 0:n.split_by_length_n_line},{value:"newline",label:null===(s=k.i18n[this.state.lang])||void 0===s?void 0:s.split_by_line},{value:"length",label:null===(r=k.i18n[this.state.lang])||void 0===r?void 0:r.split_by_length},{value:"char",label:null===(i=k.i18n[this.state.lang])||void 0===i?void 0:i.split_by_char}]}),("length"==this.props.store.split_type||"lengthAndLine"==this.props.store.split_type)&&Object(Y.jsx)(ht,{field:"split_length",className:"mt-2",placeholder:null===(o=k.i18n[this.state.lang])||void 0===o?void 0:o.split_length}),"char"==this.props.store.split_type&&Object(Y.jsx)(ht,{field:"split_char",className:"mt-2",placeholder:null===(a=k.i18n[this.state.lang])||void 0===a?void 0:a.split_char}),Object(Y.jsxs)("div",{className:"border rounded p-5 mt-8",children:[Object(Y.jsx)(ht,{type:"textarea",field:"system_prompt",className:"mt-2",placeholder:"",label:null===(l=k.i18n[this.state.lang])||void 0===l?void 0:l.system_prompt}),Object(Y.jsx)(ht,{type:"textarea",field:"user_prompt",className:"mt-2",placeholder:"",label:null===(c=k.i18n[this.state.lang])||void 0===c?void 0:c.user_prompt}),Object(Y.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(Y.jsx)(ht,{field:"max_tokens",className:"mt-2 mr-2 w-16",placeholder:"",label:"Max Tokens"}),Object(Y.jsx)(ht,{field:"temperature",className:"mt-2 mr-2 w-16",placeholder:"",label:"Temperature"}),Object(Y.jsx)(mt,{field:"model",className:"mt-3",label:null===(p=k.i18n[this.state.lang])||void 0===p?void 0:p.model,menuPlacement:"top",options:[{value:"gpt4",label:"GPT4"},{value:"gpt-4o",label:"GPT4o"},{value:"gpt-4o-mini",label:"GPT4o-mini"},{value:"gpt-3.5-turbo",label:"GPT3.5"}]})]})]}),Object(Y.jsxs)(Q.c,{className:"mt-8",children:[Object(Y.jsx)(pt.a,{maxSize:10485760,multiple:!1,ref:this.drop_ref,onDrop:function(t){return y.onDropped(t)},children:function(t){var e,n=t.getRootProps,s=t.getInputProps;return Object(Y.jsxs)("div",Object(ot.a)(Object(ot.a)({},n()),{},{children:[Object(Y.jsx)("input",Object(ot.a)({},s())),Object(Y.jsx)(Q.b,{large:!0,icon:"document-open",text:null===(e=k.i18n[y.state.lang])||void 0===e?void 0:e.upload_file})]}))}}),Object(Y.jsx)("div",{className:"flex flex-row items-center text-gray-400 px-2",children:"- OR -"}),Object(Y.jsx)(Q.b,{large:!0,icon:"clipboard",text:null===(u=k.i18n[this.state.lang])||void 0===u?void 0:u.paste_text,onClick:function(){return y.paste()}}),Object(Y.jsx)(Q.b,{large:!0,icon:"rocket-slant",className:"ml-2",text:null===(h=k.i18n[this.state.lang])||void 0===h?void 0:h.begin_process,onClick:function(){return y.process()},disabled:!((null===(b=this.props.store.lists)||void 0===b?void 0:b.length)>0)})]}),Object(Y.jsxs)("div",{className:"mt-8 flex flex-row justify-between border-t pt-8",children:[Object(Y.jsx)(Q.b,{large:!0,icon:"key",className:"",onClick:function(){return y.setState({open_dialog:!y.state.open_dialog})},text:"OpenAI/API2D Key"}),"yes"==this.props.store.count_token?Object(Y.jsx)(Q.b,{large:!0,text:"\u9884\u4f30Token",onClick:function(){return y.toggle_token()},active:!0}):Object(Y.jsx)(Q.b,{large:!0,text:"\u9884\u4f30Token",onClick:function(){return y.toggle_token()}}),Object(Y.jsxs)(Q.c,{children:[Object(Y.jsx)(Q.b,{large:!0,text:"En",active:"en"==this.state.lang,onClick:function(){return y.setState({lang:"en"})}}),Object(Y.jsx)(Q.b,{large:!0,text:"\u4e2d\u6587",active:"zh"==this.state.lang,onClick:function(){return y.setState({lang:"zh"})}})]})]}),Object(Y.jsxs)("div",{className:"bg-blue-100 rounded p-5 mt-5 process-info",children:[this.state.out,this.state.map_text]}),Object(Y.jsx)("div",{className:"text-gray-400 px-2 mt-5",children:"PS: \u7531\u4e8e\u6d4f\u89c8\u5668\u9650\u5236\u5b58\u50a8\uff0c\u6587\u672c\u8bf7\u4e0d\u8981\u8d85\u8fc710M (Edge/Chrome) \u6216\u8005 5M( Safari )"}),Object(Y.jsxs)("div",{className:"text-gray-400 px-2 mt-5",children:["\ud83c\udf88 Made by ",Object(Y.jsx)("a",{href:"https://github.com/easychen",rel:"noreferrer",target:"_blank",children:"EasyChen"})," \xb7 ",Object(Y.jsx)("a",{href:"https://a.ftqq.com/2023/04/19/gptbat/",target:"_blank",rel:"noreferrer",children:"\u4f7f\u7528\u6559\u7a0b"})," \xb7 ",Object(Y.jsx)("a",{href:"https://github.com/easychen/gpt-bat",target:"_blank",rel:"noreferrer",children:"\u6e90\u4ee3\u7801"})]})]}),Object(Y.jsxs)("div",{className:"right w-1/2",children:[Object(Y.jsxs)("div",{className:"log p-2 text-lg bg-blue-100",children:[null===(d=this.props.store.lists)||void 0===d?void 0:d.length," ",null===(j=k.i18n[this.state.lang])||void 0===j?void 0:j.segment,"yes"==this.props.store.count_token?Object(Y.jsxs)(Y.Fragment,{children:[" ",null===(_=k.i18n[this.state.lang])||void 0===_?void 0:_.about," ",100*(parseInt(this.props.store.upload_tokens_count/100)+1)," Tokens"]}):null]}),Object(Y.jsx)("div",{className:"content-list",children:this.props.store.lists&&this.props.store.lists.map((function(t,e){return Object(Y.jsx)("div",{className:"p-2 content-item",children:t},e)}))}),Object(Y.jsx)(Q.e,{isOpen:this.state.open_dialog,title:null===(f=k.i18n[this.state.lang])||void 0===f?void 0:f.key_settings_title,icon:"info-sign",onClose:function(){return y.setState({open_dialog:!1})},children:Object(Y.jsxs)("div",{className:"p-5 mt-2",children:[Object(Y.jsx)(ht,{field:"openai_key",placeholder:null===(m=k.i18n[this.state.lang])||void 0===m?void 0:m.key_settings_key}),Object(Y.jsx)(ht,{field:"openai_api_url",placeholder:null===(O=k.i18n[this.state.lang])||void 0===O?void 0:O.key_settings_url}),Object(Y.jsx)(jt,{onSubmit:function(){return y.save_key()},cancel:Object(Y.jsx)(Q.a,{large:!0,icon:"key",href:"https://api2d.com/r/186008",target:"_blank",children:null===(g=k.i18n[this.state.lang])||void 0===g?void 0:g.key_settings_apply})})]})}),Object(Y.jsx)(Q.e,{isOpen:this.state.open_editor,title:null===(v=k.i18n[this.state.lang])||void 0===v?void 0:v.content_settings_title,icon:"info-sign",onClose:function(){return y.setState({open_editor:!1})},children:Object(Y.jsxs)("div",{className:"p-5 mt-2",children:[Object(Y.jsx)(ht,{type:"textarea",textClass:"high-box",growVertically:!0,field:"_content",placeholder:null===(x=k.i18n[this.state.lang])||void 0===x?void 0:x.content_settings_content}),Object(Y.jsx)(jt,{onSubmit:function(){return y.save_content()},cancel:Object(Y.jsx)(Q.b,{large:!0,onClick:function(){return y.setState({open_editor:!1})},children:"\u53d6\u6d88"})})]})})]})]});return Object(Y.jsx)(it,{title:this.props.store.appname,main:w})}}]),n}(D.Component))||zt)||zt)||zt),Dt=Rt,Lt=function(t){Object(H.a)(n,t);var e=Object(M.a)(n);function n(){return Object(W.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(Y.jsx)(U.a,{children:Object(Y.jsxs)(J.c,{children:[Object(Y.jsx)(J.a,{path:"/login",component:et}),Object(Y.jsx)(J.a,{path:"/index",component:Z}),Object(Y.jsx)(J.a,{path:"/",component:Dt})]})})}}]),n}(D.Component),Ft=Lt;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));B.a.render(Object(Y.jsx)(V.a,{store:Nt,children:Object(Y.jsx)(Ft,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},492:function(t,e,n){},550:function(t,e){}},[[1036,1,2]]]);